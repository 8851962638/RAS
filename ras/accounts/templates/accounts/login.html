{% extends 'base.html' %}

{% block title %}Login - Painting{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-box">
    <h1>Welcome Back ðŸŽ¨</h1>
    <p class="subtitle">Login to continue exploring amazing artists</p>

    <form id="loginForm" method="post" action="{% url 'accounts:login' %}">
      {% csrf_token %}

      <!-- Email -->
      <div class="input-group">
        <label for="email">Email</label>
        <input type="text" name="email" id="email" placeholder="Enter your email" required>
      </div>

      <!-- Password -->
      <div class="input-group">
        <label for="password">Password</label>
        <input type="password" name="password" id="password" placeholder="Enter your password" required>
      </div>

      <!-- Display error message -->
      {% if error %}
        <div class="error" style="color:red">{{ error }}</div>
      {% endif %}

      <a href="{% url 'login'%}"><button class="btn" >Login</button></a>
      <p class="switch-text">Don't have an account? <a href="{% url 'accounts:signup' %}">Sign Up</a></p>
    </form>
  </div>
</div>
{% endblock %}



{% comment %} <script>
function loginUser() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    fetch("{% url 'login' %}", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": csrfToken
        },
        body: JSON.stringify({ email: email, password: password })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Redirect to home
            window.location.href = "{% url 'home' %}";
        } else {
            // Show error
            document.getElementById("error").innerText = data.error;
        }
    })
    .catch(error => {
        console.error("Error:", error);
        document.getElementById("error").innerText = "Something went wrong!";
    });
}
</script> {% endcomment %}
